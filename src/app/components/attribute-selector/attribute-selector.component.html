@if (dialogMode) {
  <fs-dialog>
    <div mat-dialog-title>
      {{ attributeConfig.pluralName }}
    </div>
    <div mat-dialog-content>
      <ng-template [ngTemplateOutlet]="chipsList"></ng-template>
    </div>
    <div mat-dialog-actions>
      <button
          mat-button
          (click)="done()"
          color="primary">
        Done
      </button>
      @if (showManage !== false) {
        <button
            mat-button
            (click)="manage()">
          Manage
        </button>
      }
    </div>
  </fs-dialog>
} @else {
  @if (filter) {
    <mat-form-field class="search-attribute">
      <mat-label>
        {{ placeholder }}
      </mat-label>
      <mat-icon matPrefix>
        search
      </mat-icon>
      <div>
        <input
          type="text"
          matInput
          [(ngModel)]="filterKeyword"
          (ngModelChange)="filterByKeyword()">
      </div>
    </mat-form-field>
  }
  <fs-chips
      [(ngModel)]="selectedAttributes"
      [compare]="compareFn">
    @for (attribute of filteredAttributes; track attribute) {
      <fs-chip
          [size]="size"
          [selectable]="true"
          [image]="attribute.image"
          [backgroundColor]="attribute.backgroundColor"
          [value]="attribute"
          (selectedToggled)="selectedToggle($event)">
        {{ attribute.name }}
      </fs-chip>
    }
  </fs-chips>
}
<ng-template #chipsList>
  @if (filter) {
    <mat-form-field class="search-attribute">
      <mat-label>
        {{ placeholder }}
      </mat-label>
      <mat-icon matPrefix>
        search
      </mat-icon>
      <div>
        <input
          type="text"
          matInput
          [(ngModel)]="filterKeyword"
          (ngModelChange)="filterByKeyword()">
      </div>
    </mat-form-field>
  }
  <fs-chips
      [(ngModel)]="selectedAttributes"
      [compare]="compareFn">
    @for (attribute of filteredAttributes; track attribute) {
      <fs-chip
          [size]="size"
          [selectable]="true"
          [image]="attribute.image"
          [backgroundColor]="attribute.backgroundColor"
          [value]="attribute"
          (selectedToggled)="selectedToggle($event)">
        {{ attribute.name }}
      </fs-chip>
    }
  </fs-chips>
</ng-template>